<!DOCTYPE html>
<html>
    <head>
        <title>Custom Select</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <script src="../../lib/prism/prism.js" type="text/javascript"></script>
        <script src="Select.js" type="text/javascript"></script>
        <link href="../../lib/prism/prism.css" rel="stylesheet" type="text/css"/>
        <link href="select.css" rel="stylesheet" type="text/css"/>
        <link href="../../lib/sm-default.css" rel="stylesheet" type="text/css"/>
    </head>
    <body>
        <div class="container padding-lr">
            <h1>Custom Select</h1>
            <hr class="border-bottom border-light" />

            <form method="post" target="_blank" action="form.php">
                <div class="form-line font-medium">
                    <div class="float-left">
                        <select id="exemplo" name="teste">
                            <option value="none">Selecionar</option>
                            <option value="option1">Opção 1</option>
                            <option value="option2">Opção 2</option>
                            <option value="option3">Opção 3</option>
                            <option value="option4">Opção 4</option>
                            <option value="option5">Opção 5</option>
                        </select>
                    </div>
                    <div class="over">
                        <button type="submit" class="btn-default font-medium">Executar form</button>
                    </div>
                </div>
            </form>
            <div class="card">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
            <script>var sel = new Select('#exemplo');</script>

            <div class="font-default margin-top-high">
                <hr class="border-bottom border-grey">
                <p class="font-large underline italic">Como utilizar...</p>

                <p class="list margin-left">Adicionamos o arquivo CSS padrão ao cabeçalho do HTML</p>
                <pre class="language-html"><code>&lt;link href="sm-default.css" rel="stylesheet" type="text/css"/&gt;</code></pre>

                <p class="list margin-left margin-top">Criamos um novo aquivo javascript e damos a ele o nome de
                    <span class="bold">Select.js</span></p>

                <p class="list margin-left margin-top">Adicionamos então esse arquivo no cabeçalho do HTML.</p>
                <pre class="language-html"><code>&lt;script src="Select.js" type="text/javascript"&gt;&lt;/script&gt;</code></pre>

                <p class="list margin-left margin-top">Inserimos o código javascript no arquivo .js criado</p>

                <pre class="language-javascript line-numbers"><code>/**
 * ********************************************
 * * @Class Select
 * * @author Spell-Master (Omar Pautz)
 * * @version 1.0 (2018)
 * ********************************************
 * * @Info Personaliza grupo de opções 
 * ********************************************
 * * @param selectID
 * #ID do select a ser usado
 * ********************************************
 */

var Select = function (selectID) {
    var $selectGroup = document.querySelector(selectID);
    var $sltOpt = $selectGroup.querySelectorAll('option');
    var $newSlt, $nslt, $slti, $sltUl, $sltLi, $sltVal, $sltStatus, $sltActive;

    getNewSelect();

    /**
     * ****************************************
     * * @function getNewSelect
     * Esconde o select atual e eria o novo
     * elemento do select personalizado.
     * ****************************************
     */
    function getNewSelect() {
        $selectGroup.classList.add('slthidden');
        $newSlt = document.createElement('div');
        $selectGroup.parentNode.insertBefore($newSlt, $selectGroup);
        $newSlt.classList.add('sltp');
        $newSlt.innerHTML = '&lt;div class="nslt" id="nslt"&gt;&lt;/div&gt;';
        $nslt = document.getElementById('nslt');
        createList();
    }

    /**
     * ****************************************
     * * @function createList
     * Cria a lista de opções.
     * ****************************************
     */
    function createList() {
        $sltUl = document.createElement('ul');
        $sltUl.classList.add('sltlist');
        $newSlt.appendChild($sltUl);
        createOptions();
    }

    /**
     * ****************************************
     * * @function createOptions
     * Cria as opções da lista.
     * ****************************************
     */
    function createOptions() {
        for ($slti = 0; $slti &lt; $sltOpt.length; $slti++) {
            $sltLi = document.createElement('li');
            $sltLi.setAttribute('data-value', $sltOpt[$slti].value);
            $sltLi.innerHTML = $sltOpt[$slti].innerHTML;
            $sltUl.appendChild($sltLi);
            $sltLi.addEventListener('click', optionClick.bind(this));
            $nslt.innerHTML = $sltOpt[0].innerText;
        }
        clickOff();
    }

    /**
     * ****************************************
     * * @function optionClick
     * - Captura dos dados da opção selecionada
     * - Insere o valor no select oculto.
     * * @param ev
     * Opção selecionada.
     * ****************************************
     */
    function optionClick(ev) {
        $sltVal = ev.target.getAttribute('data-value');
        $nslt.innerText = ev.target.innerText;
        $selectGroup.value = $sltVal;
    }

    /**
     * ****************************************
     * * @function clickOff
     * Oculta elemento ou aciona nova função
     * para mostrar o seletor se o mesmo for
     * clicado.
     * ****************************************
     */
    function clickOff() {
        document.addEventListener('click', function (event) {
            if (event.target.id === 'nslt') {
                openOptions();
            } else {
                $sltUl.style.display = 'none';
                $nslt.classList.remove('active');
            }
        });
    }

    /**
     * ****************************************
     * * @function openOptions
     * Mostra ou oculta as opções de acordo
     * com sua ativação.
     * ****************************************
     */
    function openOptions() {
        $sltStatus = window.getComputedStyle ? getComputedStyle($sltUl, null) : $sltUl.currentStyle;
        $sltActive = $sltStatus.display;
        if ($sltActive === 'none') {
            $sltUl.style.display = 'block';
        } else {
            $sltUl.style.display = 'none';
        }
        $nslt.classList.toggle('active');
    }
};</code></pre>

                <p class="list margin-left margin-top">Criamos então um novo arquivo de folha de estilos, e damos
                    a ele o nome <span class="bold">de Select.css</span></p>

                <p class="list margin-left margin-top">Adicionamos o arquivo no cabeçalho do html.</p>
                <pre class="language-html"><code>&lt;link href="select.css" rel="stylesheet" type="text/css"/&gt;</code></pre>

                <p class="list margin-left margin-top">Inserimos as propiedades no css criado</p>
                <pre class="language-css line-numbers"><code>/**
 * ********************************************
 * * Custom Select Option
 * * @author Spell-Master (Omar Pautz)
 * * @version 1.0 (2018)
 * ********************************************
 */
.slthidden {
    display:none;
    visibility:hidden
}
.sltp {
    cursor:pointer;
    display:inline-block;
    position:relative;
    font-size:1rem;
    color:#fff;
    min-width:13.75rem;
    height:6rem;
}
.nslt {
    position:absolute;
    top:0;
    right:0;
    bottom:0;
    left:0;
    background-color:#c40700;
    padding:.75rem;
    cursor: pointer
}
.nslt:after {
    content:"";
    width:0;
    height:0;
    border:.625rem solid transparent;
    border-color:#ffffff transparent transparent transparent;
    position:absolute;
    top:1.2rem;
    right:.625rem
}
.nslt:active:after, .nslt.active:after {
    top:.5rem;
    border-color:transparent transparent #ffffff transparent
}
.sltlist {
    display:none;
    position:absolute;
    top:100%;
    right:0;
    left:0;
    z-index:9;
    margin:0;
    padding:0;
    list-style:none;
    background-color:#fafafa;
    box-shadow:0 .375rem .375rem 0 rgba(0,0,0,.5)
    cursor: pointer
}
.sltlist > li {
    margin:0;
    padding:.75rem 0;
    text-indent:.5rem;
    color:#444444;
    border-top:.0625rem solid #e7e7e7
}
.sltlist > li:hover {
    color:#ffffff;
    background:#c40700
}</code></pre>

                <p class="list margin-left margin-top">
                    Em nosso html criamos o seletor e suas opções
                </p>
                <div class="blockquote-red">É importante que o seletor possua um #ID de identificação,
                    pois esse id será necessário para saber qual é o elemento para ser personalizado.
                    <p>Eu desaconselho a utilização que não seja por reconhecimento do ID do elemento!</p>
                </div>
                <pre class="language-html line-numbers"><code>&lt;select id="exemplo"&gt;
    &lt;option&gt;Selecionar&lt;/option&gt;
    &lt;option value="option1"&gt;Opção 1&lt;/option&gt;
    &lt;option value="option2"&gt;Opção 2&lt;/option&gt;
    &lt;option value="option3"&gt;Opção 3&lt;/option&gt;
    &lt;option value="option4"&gt;Opção 4&lt;/option&gt;
    &lt;option value="option5"&gt;Opção 5&lt;/option&gt;
&lt;/select&gt;</code></pre>

                <p class="list margin-left margin-top">
                    Por fim, declamos a classeJS <span class="bold">Select()</span> envinado o ID do select como
                    parâmetro.</p>
                <p>A declaração deve sempre vir em linhas abaixo de onde está o elemento ID que vamos atacar.</p>
                <pre class="language-html"><code>&lt;script&gt;var select = new Select('#exemplo');&lt;/script&gt;</code></pre>
            </div>

        </div>
        <div class="box-y-50"></div>
    </body>
</html>

